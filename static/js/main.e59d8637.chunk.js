(this.webpackJsonpexcel2pic=this.webpackJsonpexcel2pic||[]).push([[0],{36:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a(7),i=a.n(c),o=a(26),d=a.n(o),s=(a(36),a(27)),l=a(28),r=a(31),h=a(30),g=a(8),u=a.n(g),m=(a(77),a(76),function(e){Object(r.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).initStage=function(){for(var e=n.state,t=e.canvasWidth,a=e.canvasHeight,c=new u.a.Stage({x:0,y:0,container:"container",width:t,height:a}),i=0;i<3;i++)n.addBox(c,i)},n.addBox=function(e,t){var a=n.state,c=a.canvasWidth,i=a.boxArray,o=new u.a.Layer,d=new u.a.Group({Zindex:10,x:c/2-50,y:10+40*t,width:100,height:25,fill:"#00D2FF",stroke:"black",strokeWidth:4,draggable:!0});d.add(new u.a.Rect({width:100,height:25,fill:"lightblue"})),d.add(new u.a.Text({text:i[t],fontSize:18,fontFamily:"Calibri",fill:"#000",width:100,padding:5,align:"center"})),d.on("mouseover",(function(){document.body.style.cursor="pointer"})),d.on("mouseout",(function(){document.body.style.cursor="default"})),o.add(d),e.add(o),n.setState({stage:e})},n.download=function(){var e=n.state.stage,t=document.createElement("a"),a=new MouseEvent("click");t.download="test.jpg",t.href=e.toDataURL({pixelRatio:1}),t.dispatchEvent(a)},n.handleImageChange=function(e){var t=new FileReader,a=e.target.files[0];t.onloadend=function(){n.setState({imageUrl:t.result}),n.image2Canvas()},t.readAsDataURL(a)},n.checkImageSize=function(e,t,a){var c=n.state.stage,i=document.getElementById("uploadBgBlock"),o=i.offsetWidth,d=i.offsetHeight,s=new u.a.Layer,l=.2;for(console.log(o,d),console.log(t,e);o<e||d<t;)t/=l,e/=l,l+=.2;var r=new u.a.Image({x:0,y:0,image:a,width:e,height:t});s.add(r),s.batchDraw(),c.width(e),c.height(t),c.add(s);for(var h=0;h<3;h++)n.addBox(c,h);n.setState({stage:c,canvasWidth:e,canvasHeight:t})},n.image2Canvas=function(e){var t=n.state.imageUrl,a=(document.getElementById("uploadBgBlock"),new window.Image);a.onload=function(){n.checkImageSize(a.width,a.height,a)},a.src=t},n.download=function(){var e=n.state.stage,t=document.createElement("a"),a=new MouseEvent("click");t.download="test.jpg",t.href=e.toDataURL(),t.dispatchEvent(a)},n.state={image:null,imageUrl:"",stage:null,canvasWidth:250,canvasHeight:250,boxArray:["\u8a3a\u6240\u540d\u7a31","\u8a55\u8ad6\u8005","\u8a55\u8ad6"]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.initStage()}},{key:"render",value:function(){var e=this.state,t=e.canvasWidth,a=e.canvasHeight;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"topBlock",children:Object(n.jsx)("div",{className:"topText",children:"excel2picture demo"})}),Object(n.jsxs)("div",{className:"cotentBlock",children:[Object(n.jsxs)("div",{className:"uploadBlock",children:[Object(n.jsxs)("div",{className:"uploadBgBlock",id:"uploadBgBlock",children:[Object(n.jsx)("input",{type:"file",onChange:this.handleImageChange,accept:"image/*"}),Object(n.jsx)("div",{className:"container",id:"container",style:{width:t,height:a}})]}),Object(n.jsx)("div",{className:"uploadExcelBlock",children:Object(n.jsx)("span",{children:"excelBlock"})})]}),Object(n.jsx)("button",{className:"readyButton",onClick:this.download,children:"\u958b\u59cb\u751f\u6210\u5716\u7247"})]})]})}}]),a}(i.a.Component)),v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,79)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),i(e),o(e)}))};d.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(m,{})}),document.getElementById("root")),v()}},[[78,1,2]]]);
//# sourceMappingURL=main.e59d8637.chunk.js.map